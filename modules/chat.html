<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI Chat</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/styles.css">
</head>
<body class="bg-gradient-to-br from-indigo-50 to-purple-50 min-h-screen">
  <div class="container mx-auto px-4 py-8 max-w-2xl">
    <a href="/" class="text-indigo-600 hover:underline text-sm">Back</a>
    <h1 class="text-3xl font-bold text-indigo-700 mb-6">AI Chat</h1>

    <div id="chat" class="bg-white p-4 rounded-xl shadow h-96 overflow-y-auto mb-4"></div>

    <div class="flex gap-2">
      <input id="msg" class="flex-1 p-3 border rounded-lg" placeholder="İngilizce yaz..." />
      <button onclick="send()" class="bg-indigo-600 text-white px-6 py-3 rounded-lg">Gönder</button>
    </div>
  </div>

  <script>
    async function send() {
      const input = document.getElementById('msg');
      const msg = input.value.trim();
      if (!msg) return;

      addMsg('Sen', msg, 'text-right');
      input.value = '';

      const res = await fetch('/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: msg })
      });

      const data = await res.json();
      addMsg('AI', data.reply, 'text-left');
    }

    function addMsg(sender, text, align) {
      const chat = document.getElementById('chat');
      const div = document.createElement('div');
      div.className = `mb-3 ${align}`;
      div.innerHTML = `<p class="font-bold text-indigo-700">${sender}:</p><p class="bg-gray-100 p-3 rounded-lg inline-block">${text}</p>`;
      chat.appendChild(div);
      chat.scrollTop = chat.scrollHeight;
    }
  </script>
</body>
</html>
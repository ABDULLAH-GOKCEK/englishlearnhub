<script>
async function sendMessage() {
  const input = document.getElementById('messageInput');
  const message = input.value.trim();
  if (!message) return;

  // Kullan覺c覺 mesaj覺
  addMessage(message, 'user');
  input.value = '';

  // AI cevab覺
  const res = await fetch('/api/chat', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ message, level: 'A1' })
  });

  const data = await res.json();
  addMessage(data.reply, 'ai');
}

function addMessage(text, sender) {
  const chat = document.getElementById('chatMessages');
  const div = document.createElement('div');
  div.className = sender === 'user' ? 'text-right' : 'text-left';
  div.innerHTML = `<div class="inline-block p-3 rounded-xl mb-2 ${sender === 'user' ? 'bg-blue-600 text-white' : 'bg-gray-200'}">${text}</div>`;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}
</script>